Voici exactement comment ta pipeline GitLab rÃ©cupÃ¨re le JAR ./target/bank-info.jar, puis lâ€™envoie et Ã©crase lâ€™ancien sur ton serveur via le script de dÃ©ploiement.

Je tâ€™explique pas Ã  pas, trÃ¨s clairement ğŸ‘‡

â¸»

ğŸŸ¦ 1. OÃ¹ est gÃ©nÃ©rÃ© ./target/bank-info.jar ?

Dans ton job build :

build:
  stage: build
  script:
    - mvn $MAVEN_CLI_OPTS clean install -X
  artifacts:
    paths:
      - target/bank-info.jar

Ce qui se passe :
	1.	mvn clean install compile ton projet
	2.	Maven crÃ©e le jar final dans :

target/bank-info.jar


	3.	GitLab sauvegarde ce fichier comme artifact
grÃ¢ce Ã  cette partie :

artifacts:
  paths:
    - target/bank-info.jar


	4.	Cet artifact sera ensuite transmis automatiquement aux jobs suivants.

â¡ï¸ Donc le JAR est bien rÃ©cupÃ©rÃ© Ã  ce moment-lÃ .

â¸»

ğŸŸ¦ 2. Comment le JAR arrive dans le job deploy ?

Ton job deploy utilise :

deploy:
  needs:
    - job: build

ğŸ‘‰ Cela dit Ã  GitLab :
â€œLe job deploy a besoin des artifacts du job build.â€

Donc GitLab copie automatiquement le target/bank-info.jar dans lâ€™environnement du job deploy.

Tu nâ€™as rien Ã  faire, GitLab gÃ¨re Ã§a automatiquement.

â¸»

ğŸŸ¦ 3. Comment le JAR est copiÃ© sur ton serveur ?

Regarde la commande appelÃ©e dans le job deploy :

script:
  - sudo /opt/script/gitlab/deploy_java_jar.sh \
      -j ./target/bank-info.jar \
      -d /opt/bank-info/ \
      -u bank-info \
      -s bank-info

ğŸ‘‰ Le script /opt/script/gitlab/deploy_java_jar.sh est celui qui :
	â€¢	prend le jar (-j ./target/bank-info.jar)
	â€¢	le copie dans le dossier cible (-d /opt/bank-info/)
	â€¢	probablement arrÃªte et redÃ©marre le service (-u bank-info -s bank-info)

âš ï¸ Ce script nâ€™est pas dans GitLab, il est sur ton serveur (runner ou machine de dÃ©ploiement).

Je tâ€™explique comment il fonctionne en gÃ©nÃ©ral ğŸ‘‡

â¸»

ğŸŸ¦ 4. Que fait ce script de dÃ©ploiement (deploy_java_jar.sh) ?

MÃªme si je ne vois pas son contenu,
90% des scripts GitLab de dÃ©ploiement Java fonctionnent comme Ã§a :

1. Copier le nouveau JAR sur le serveur

(soit avec cp, soit avec scp, soit avec rsync)

Exemple typique :

cp ./target/bank-info.jar /opt/bank-info/bank-info.jar

2. Ã‰craser lâ€™ancien JAR

Il suffit que la destination soit la mÃªme :

/opt/bank-info/bank-info.jar

Si un ancien fichier existe â†’ cp va le remplacer automatiquement.

3. RedÃ©marrer le service (si nÃ©cessaire)

Exemple classique :

systemctl stop bank-info
systemctl start bank-info

Ou :

systemctl restart bank-info


â¸»

ğŸŸ© RÃ©sumÃ© clair

Ã‰tape	Qui fait quoi ?	Fichier
Build	Maven crÃ©e le jar	target/bank-info.jar
Artifacts	GitLab le sauvegarde	GitLab Artifacts
Deploy	GitLab rÃ©cupÃ¨re lâ€™artifact	./target/bank-info.jar
Script	Copie + Ã©crase le jar sur le serveur	/opt/bank-info/bank-info.jar

â¡ï¸ Oui, Ã§a Ã©crase lâ€™ancien automatiquement.

â¸»

ğŸŸ¦ Si tu veux aller plus loin

Je peux aussi :

âœ… te montrer comment afficher le contenu du script deploy_java_jar.sh
(si tu me colles son contenu)

OU

âœ… tâ€™expliquer comment modifier le dÃ©ploiement :
	â€¢	backup auto de lâ€™ancienne version
	â€¢	versioning
	â€¢	rollback possible
	â€¢	dÃ©ploiement bleu/vert

Dis-moi ce que tu veux !